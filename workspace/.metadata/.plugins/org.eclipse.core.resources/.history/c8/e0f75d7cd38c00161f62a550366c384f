/*
 * procesamiento.c
 *
 *  Created on: 7 de oct. de 2016
 *      Author: Pablo
 */


#include "header.h"


int fft_function()
{
	const uint8_t ifft = FALSE;
	const uint8_t bit_reverse = TRUE;
	const uint16_t fft_length = FFT_SIZE*2; // el "*2" es porque el espectro original es espejado
	arm_cfft_radix2_instance_q31 fft_inst_31;
	arm_status status = ARM_MATH_SUCCESS;

	status = arm_cfft_radix2_init_q31(&fft_inst_31, fft_length, ifft, bit_reverse);
	if(status == ARM_MATH_TEST_FAILURE)
	{
		return -1;
	}
	arm_cfft_radix2_q31(&fft_inst_31, mSignalIn);
	arm_cmplx_mag_q31(mSignalIn, mFFTOut, fft_length);

	return 0;
}
